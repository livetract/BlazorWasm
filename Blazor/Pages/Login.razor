@page "/login"
@inject IAuthService AuthProvider

<h3>Login</h3>

<EditForm Model="_loginModel" OnValidSubmit="ValidSubmit">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <p>
        <label>
            <InputText @bind-Value="_loginModel.UserName" />
        </label>
    </p>
    <p>
        <label>
            <InputText @bind-Value="_loginModel.Password" />
        </label>
    </p>
    <button type="submit">Submit</button>
</EditForm>

@if (string.IsNullOrEmpty(msg))
{
    <p>现在还没有数据</p>
}
else
{
    <p>@msg</p>
}

@code {

    private LoginModel _loginModel;
    private string msg;
    protected override void OnInitialized()
    {
        _loginModel = new LoginModel();

        base.OnInitialized();
    }

    private async Task ValidSubmit()
    {
        msg = await AuthProvider.Login(_loginModel);
    }

}